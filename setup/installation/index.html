
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../user/users/">
      
      
        <link rel="next" href="../configuration/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.14">
    
    
      
        <title>Installation - SwordPhish</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.10ba22f1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SwordPhish" class="md-header__button md-logo" aria-label="SwordPhish" data-md-component="logo">
      
  <img src="../../images/soc102c.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SwordPhish
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/societe-generale/swordphish-awareness" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    swordphish-awareness
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user/campaigns/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Setup

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contrib/" class="md-tabs__link">
        
  
    
  
  Contribution

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SwordPhish" class="md-nav__button md-logo" aria-label="SwordPhish" data-md-component="logo">
      
  <img src="../../images/soc102c.png" alt="logo">

    </a>
    SwordPhish
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/societe-generale/swordphish-awareness" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    swordphish-awareness
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/campaigns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Campaigns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/targets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Targets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Users
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Installation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-and-creating-database" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring and Creating database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swordphish-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Swordphish Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-supervisor" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up supervisor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swordphish-last-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Swordphish last setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antispam" class="md-nav__link">
    <span class="md-ellipsis">
      Antispam?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-phishing-domains" class="md-nav__link">
    <span class="md-ellipsis">
      About phishing domains
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-and-creating-database" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring and Creating database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swordphish-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Swordphish Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-supervisor" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up supervisor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swordphish-last-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Swordphish last setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antispam" class="md-nav__link">
    <span class="md-ellipsis">
      Antispam?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-phishing-domains" class="md-nav__link">
    <span class="md-ellipsis">
      About phishing domains
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/societe-generale/swordphish-awareness/edit/master/docs/setup/installation.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="installation">Installation</h1>
<h2 id="requirements">Requirements</h2>
<p>Swordphish requires a few important things before starting installation
process:</p>
<ul>
<li><strong>A server</strong>: we recommend to adjust the choice of the server
  depending on the campaign sizes you want to do (100k targets is a
  BIG campaign)</li>
<li><strong>At least two domains names</strong>: one to join Swordphish web page and
  at least one phishing domain (to send mails and host phishing pages)</li>
<li><strong>A mail server</strong>: we won't cover the mail server installation
  here, but keep in mind that a well configured mail server can
  accelerate drastically phishing mails diffusion</li>
</ul>
<p>The domain name used to join Swordphish interface must have at least an <code>A</code>
entry in the DNS zone pointing to the server's IP.</p>
<p>The domain(s) used to send mail and host phishing pages must have at
least two entry in the DNS Zone. An <code>A</code> entry pointing to the server and a
subdomain wildcard entry pointing to the same server IP (it allows to
use subdomains in phishing pages).</p>
<p>The following installation process has been tested on Ubuntu Server
(16.04) but you can use any Linux (or Unix?) distro you like, but we
won't provide any support for that.</p>
<h2 id="installing-dependencies">Installing Dependencies</h2>
<p>Required packages:</p>
<pre><code class="language-bash">apt install build-essential libpq-dev nginx git supervisor redis-server
apt install python3-dev python3-pip postgresql postgresql-contrib
apt install virtualenv virtualenvwrapper

</code></pre>
<p>Create a dedicated user for security purpose:</p>
<pre><code class="language-bash">adduser swordphish --disabled-password

</code></pre>
<p>Add the following line in the user's \~/.profile to enable
virtualenvwrapper:</p>
<pre><code class="language-bash">export WORKON_HOME=~/.virtualenvs
mkdir -p $WORKON_HOME
source $(which virtualenvwrapper.sh)
</code></pre>
<p>Switch to newly created user and git-clone Swordphish repository:</p>
<pre><code class="language-bash">su - swordphish
git clone https://github.com/societe-generale/swordphish-awareness.git swordphish
</code></pre>
<p>Ensure that virtualenvwrapper has been loaded in user's environment and
create the virtualenv:</p>
<pre><code class="language-bash">source ~/.profile
mkvirtualenv -p python3 -a /home/swordphish/swordphish/ swordphish

</code></pre>
<p>You can choose not to create the virtualenv, but <strong>we highly recommend
it</strong> to prevent any side effect with another app installed on the same
server for example.</p>
<p>Install all the python dependencies:</p>
<pre><code class="language-bash">pip install -r requirements.txt

</code></pre>
<h2 id="configuring-and-creating-database">Configuring and Creating database</h2>
<p>Switch to postgresql user:</p>
<pre><code class="language-bash">su - postgres
createuser -P swordphish
createdb --owner swordphish swordphish

</code></pre>
<p>Don't forget the password you'll need it later!</p>
<p>Depending on the size of the campaigns you want to do, consider tuning
Postgresql performance depending of the machine you run swordphish on.</p>
<p>Here is a list of parameter you should consider adapt:</p>
<ul>
<li><strong>shared_buffers</strong>: memory used to cache data, consider setting this
  to 1/4 of the total RAM</li>
<li><strong>work_mem</strong>: 50MB is a nice value if you have more than 16go of RAM</li>
<li><strong>maintenance_work_mem</strong>: the maximum memory postgres can use for
  maintenance (index creation etc.)</li>
<li><strong>wal_buffers</strong>: 1/32 of the size of shared_buffers, with an upper
  limit of 16MB</li>
<li><strong>effective_cache_size</strong>: 1/2 of total memory would be a normal
  conservative setting</li>
</ul>
<h2 id="swordphish-configuration">Swordphish Configuration</h2>
<p>Now let's adapt Swordphish to your environment. Go to the path where
you've installed the code and copy the settings.py file to a new one:</p>
<pre><code class="language-bash">cd /home/swordphish/swordphish/
cp Swordphish/settings.py Swordphish/settings_prod.py

</code></pre>
<p>Then generate a new secret-key:</p>
<pre><code class="language-bash">workon swordphish
./manage.py generate_secret_key

</code></pre>
<p>Then open the newly created settings_prod.py with your favorite editor.
Here is the value you must change:</p>
<ul>
<li><strong>ADMINS</strong>: fill the array with the different admins' mails
  (they'll receive stacktraces and potential errors)</li>
<li><strong>DEBUG</strong>: set this to False once you have tested everything</li>
<li><strong>DATABASES</strong>: set the credentials of the postgres account you
  created before</li>
<li><strong>SWORDPHISH_URL</strong>: set this to the URL you'll use to reach
  Swordphish interface</li>
<li><strong>USER_ACCOUNT_CREATION_MAIL_SENDER</strong>: the mail address which will
  be used to send swordphish accounts creation mails</li>
<li><strong>USER_ACCOUNT_CREATION_MAIL_CONTACT</strong>: the mail address used as
  reply to in the swordphish accounts creation mails</li>
<li><strong>SERVER_EMAIL</strong>: mail address which will be used to send different
  mails like stacktraces</li>
<li><strong>EMAIL_HOST</strong>: mail server address</li>
<li><strong>EMAIL_PORT</strong>: mail server port</li>
<li><strong>EMAIL_HOST_USER</strong>: optional</li>
<li><strong>EMAIL_HOST_PASSWORD</strong>: optional</li>
<li><strong>HOSTING_DOMAIN</strong>: the domain which will be used to reach
  swordphish interface (used to prevent targets from reaching the
  interface using phishing domains)</li>
</ul>
<p>Let's start using this freshly created config file:</p>
<pre><code class="language-bash">export DJANGO_SETTINGS_MODULE='Swordphish.settings_prod'

</code></pre>
<p>Now let's create DB structure:</p>
<pre><code class="language-bash">./manage.py migrate

</code></pre>
<p>And create super admin user (use mail address as login):</p>
<pre><code class="language-bash">./manage.py createsuperuser

</code></pre>
<p>Finally collect different static files within static dir:</p>
<pre><code class="language-bash">./manage.py collectstatic

</code></pre>
<h2 id="setting-up-supervisor">Setting up supervisor</h2>
<p>Now everything is configured let's create supervisor configuration
files. This will start the app and the celery tasks. We chose supervisor
because it's system agnostic and work whether you use SystemD, Upstart
or whatever...</p>
<p>Three configuration files are mandatory:</p>
<pre><code class="language-bash">cd /etc/supervisor/conf.d/

</code></pre>
<p>Use your favorite editor to create the three following files (adjust the
different values depending on your system):</p>
<ul>
<li><strong>swordphish_celery_beat.conf</strong>: to start the beat scheduler:</li>
</ul>
<pre><code>      [program:swordphish_celery_beat]
      environment=DJANGO_SETTINGS_MODULE='Swordphish.settings_prod'
      directory=/home/swordphish/swordphish/
      command=/home/swordphish/.virtualenvs/swordphish/bin/celery -A Swordphish beat -l info
      user=swordphish
      autostart=true
      autorestart=true
      stdout_logfile=/var/log/supervisor/swordphish_celery_beat.log
      redirect_stderr=true
</code></pre>
<ul>
<li><strong>swordphish_celery_worker.conf</strong>: to start the workers:</li>
</ul>
<pre><code>      [program:swordphish_celery_worker]
      environment=DJANGO_SETTINGS_MODULE='Swordphish.settings_prod'
      directory=/home/swordphish/swordphish/
      command=/home/swordphish/.virtualenvs/swordphish/bin/celery -A Swordphish worker -l info
      user=swordphish
      autostart=true
      autorestart=true
      stdout_logfile=/var/log/supervisor/swordphish_celery_worker.log
      redirect_stderr=true
</code></pre>
<ul>
<li><strong>swordphish.conf</strong>: to start the app server:</li>
</ul>
<pre><code>      [program:swordphish]
      environment=DJANGO_SETTINGS_MODULE='Swordphish.settings_prod'
      directory=/home/swordphish/swordphish/
      command=/home/swordphish/.virtualenvs/swordphish/bin/uwsgi --ini /home/swordphish/swordphish/uwsgi/uwsgi.ini
      user=swordphish
      autostart=true
      autorestart=true
      stdout_logfile=/var/log/supervisor/swordphish.log
      redirect_stderr=true
</code></pre>
<p>And start supervisor services:</p>
<pre><code class="language-bash">supervisorctl reread
supervisorctl reload

</code></pre>
<p>We recommend checking that everything run correctly using ps command and
netstat.</p>
<h2 id="nginx-configuration">Nginx Configuration</h2>
<p>Now that the app server is running, we need to configure Nginx http
server to access swordphish interface and phishing pages.</p>
<p>Two sites config are mandatory for swordphish. One for Swordphish
interface and one for the phishing domains.</p>
<p>We recommend to host Swordphish using a TLS connection, here is an
example of nginx configuration file:</p>
<pre><code>    #UPSTREAM
    upstream swordphish {
        # Considering that the uwsgi service is running behind TCP 8000 port
        server 127.0.0.1:8000;
    }

    # HTTP SECTION
    # All requests redirected to HTTPS SECTION
    server {
            listen   80;
            server_name FIXME_HOSTNAME;
            rewrite     ^   https://$server_name$request_uri? permanent;


            location /static/ {
               alias   /home/swordphish/swordphish/static/; #Adjust depending on your config
            }
    }


    # HTTPS SECTION
    server {
      listen 443;
      server_name FIXME_HOSTNAME;

       location /static/ {
          alias   /home/swordphish/swordphish/static/; #Adjust depending on your config
      }

      ssl on;
      ssl_certificate /etc/ssl/certs/FIXME_CERTIFICATE;
      ssl_certificate_key /etc/ssl/private/FIXME_PRIVATE_KEY;

      ssl_session_cache shared:SSL:50m;
      ssl_session_timeout 5m;

      ssl_protocols TLSv1.1 TLSv1.2;
      #ssl_ciphers &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;;
      ssl_ciphers &quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH EDH+aRSA!RC4!aNULL!eNULL!LOW!3DES!MD5!EXP!PSK!SRP!DSS&quot;;
      #ssl_ciphers DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:EDH-RSA-DES-CBC3-SHA:AES256-SHA:DES-CBC3-SHA:AES128-SHA;#:RC4-SHA:RC4-MD5;
      ssl_prefer_server_ciphers on;
      ssl_dhparam /etc/ssl/certs/FIXME_DH_PARAMS;

      access_log /var/log/nginx/swordphish_access.log;
      error_log /var/log/nginx/swordphish_error.log warn;

      add_header Strict-Transport-Security max-age=63072000;
      add_header X-Frame-Options DENY;
      add_header X-Content-Type-Options nosniff;

          error_page    403 /errors/error.html;

      # Allows big file upload
      client_max_body_size 0;

      proxy_connect_timeout       600;
      proxy_send_timeout          600;
      proxy_read_timeout          600;
      send_timeout                600;

      # FIR
      location / {
        proxy_pass http://swordphish;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      }
    }
</code></pre>
<p>Phishing domains are hosted with classic HTTP service, and a \"server\"
section is required for every phishing domain you want to use.</p>
<p>Here is a nginx config file example:</p>
<pre><code>    #UPSTREAM
      upstream swordphish {
          # Considering that the uwsgi service is running behind TCP 8000 port
          server 127.0.0.1:8000;
      }

    server {
           listen 80;
           server_name .fixme-example.net;

           error_page    403 /errors/error.html;

           # Allows big file upload
           client_max_body_size 0;

           # Swordphish
           location / {
                  proxy_pass http://swordphish;
                  proxy_set_header Host  fixme-example.net;
           }

    server {
           listen 80;
           server_name .fixme-example2.net;

           error_page    403 /errors/error.html;

           # Allows big file upload
           client_max_body_size 0;

           # Swordphish
           location / {
                  proxy_pass http://swordphish;
                  proxy_set_header Host  fixme-example2.net;
           }
</code></pre>
<p>Create the two files here:</p>
<pre><code class="language-bash">touch /etc/nginx/sites-available/swordphish.conf
touch /etc/nginx/sites-available/swordphish_phishing_domains.conf

</code></pre>
<p>And link them to the sites-enabled:</p>
<pre><code class="language-bash">ln -s /etc/nginx/sites-available/swordphish.conf /etc/nginx/sites-enabled/swordphish.conf
ln -s /etc/nginx/sites-available/swordphish_phishing_domains.conf /etc/nginx/sites-enabled/swordphish_phishing_domains.conf

</code></pre>
<p>Then restart nginx:</p>
<pre><code class="language-bash">systemctl restart nginx # (considering you're using systemd)

</code></pre>
<h2 id="swordphish-last-setup">Swordphish last setup</h2>
<p>Now you should be able to reach Swordphish interface. Start your
favorite browser and browse to the interface. You should be able to see
something like this.</p>
<p><img alt="image" src="../../images/01-swordphish-login.png" /></p>
<p>Then log into Swordphish using the superuser account you create before.
Then go to the django admin interface.</p>
<p><img alt="image" src="../../images/02-django-admin.png" /></p>
<p>Then go to the phishmail domains management interface.</p>
<p><img alt="image" src="../../images/03-phishmail-domains.png" /></p>
<p>Click on the \"add\" button, fill the form and save.</p>
<p><img alt="image" src="../../images/04-add-phishmail-domain.png" /></p>
<p><img alt="image" src="../../images/05-phishmail-domain-form.png" /></p>
<p>Repeat this operation to add all your phishmail domains.</p>
<p><strong>Congratulation, you're now ready to phish</strong></p>
<h2 id="antispam">Antispam?</h2>
<p>Sending a lot of emails will maybe trigger your antispam / anti-phishing
solution. Don't forget to set up the SPF entry of your phishing domains
and if necessary whitelist the mail server on your infrastructure.</p>
<h2 id="about-phishing-domains">About phishing domains</h2>
<p>We highly recommend to create and follow an abuse mailbox on your
phishing domains.</p>
<p>Your phishing mail will probably be forwarded outside your
organization, and it can have repercussion.</p>
<p>Keeping an eye on abuse mailboxes will allow you to manage these cases
most of the time.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../user/users/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Users">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Users
              </div>
            </div>
          </a>
        
        
          
          <a href="../configuration/" class="md-footer__link md-footer__link--next" aria-label="Next: Configuration">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Configuration
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Société Générale &copy; 2024
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.footer", "navigation.instant", "navigation.instant.prefetch", "content.action.edit"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>